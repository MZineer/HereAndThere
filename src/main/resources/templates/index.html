<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Here And There</title>
    <th:block th:replace="fragments/head :: head"></th:block>
    <!-- GOOGLE -->
    <script th:src="'https://maps.googleapis.com/maps/api/js?key=' + ${apiKey}"></script>
</head>
<body>
<div class="flex-wrap">
    <div class="container">
        <header th:replace="fragments/header :: header"></header>
        <nav th:replace="fragments/nav :: nav"></nav>
    </div>
    <main>
        <div class="container" id="content">
            <div class="row mb-3">
                <div class="mt-3">
                    <div class="card" style="width: 18rem;">
                        <img src="..." class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">Some quick example text to build on the card title and make up the
                                bulk of the
                                card's content.</p>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Cras justo odio</li>
                            <li class="list-group-item">Dapibus ac facilisis in</li>
                            <li class="list-group-item">Vestibulum at eros</li>
                        </ul>
                        <div class="card-body">
                            <a href="#" class="card-link">Card link</a>
                            <a href="#" class="card-link">Another link</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="map_window" style="display: none;">
            <div id="map">

            </div>
        </div>
    </main>
    <button type="button" class="btn btn-primary fixed-bottom mb-5 mx-auto col-md-1" id="map_btn"
            style="left:0; right:0;">
        지도 열기
    </button>
    <div class="container" id="footer">
        <footer th:replace="fragments/footer :: footer"></footer>
    </div>
</div>
<script>
    $(function () {
        // 표시할 위치
        var myLatLng = {lat: 37.566535, lng: 126.977969};

        // 지도 옵션 설정
        var mapOptions = {
            zoom: 13,
            center: myLatLng
        };

        // 구글 맵 생성
        var map = new google.maps.Map($('#map')[0], mapOptions);

        // 마커 생성
        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            title: 'Hello World!'
        });

        $("#map_btn").click(function () {
            var map_btn_name = $("map_btn").text();
            if(map_btn_name === "지도 열기") {
                $("map_btn").text("지도 닫기");
            } else {
                $("map_btn").text("지도 열기");
            }
            $("#content").toggle();
            $("#footer").toggle();
            $("#map_window").toggle();
        });

        $(window).on("load resize", function () {
            var mapHeight = $(window).height() - $("header").outerHeight() - $(".row.mb-3").outerHeight() - 8;
            var mapWidth = $(window).width();
            $("#map").css("height", mapHeight + "px");
            $("#map").css("width", mapWidth + "px");
        });
    });
</script>
</body>
</html>